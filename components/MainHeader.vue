<template>
  <div>
    <div class="main-background parallax"></div>
    <div class="main-background-blobs parallax-one"></div>
    <div class="section-container">
      <div class="section-title">
        <svg id="title-svg" class="title-svg-expanded" viewBox="0 0 376 1242" xmlns="http://www.w3.org/2000/svg">
          <path
            d="M88.8667 1242C138.7 1242 176.996 1194.1 176.996 1134.91C176.996 1083.08 151.711 1038.38 113.415 1031.99L108.015 1073.75C132.809 1077.92 148.029 1101.99 148.029 1135.15C148.029 1176.42 123.726 1198.28 89.6031 1198.28C54.0076 1198.28 30.4412 1172.49 30.6866 1135.64C30.9321 1105.43 42.7153 1076.69 74.1375 1073.01L70.2097 1030.27C26.5132 1035.92 0.98261 1080.38 0.982612 1134.91C0.737129 1194.35 37.8056 1242 88.8667 1242Z" />
          <path
            d="M173.559 962.972L108.75 962.972L108.75 935.216L173.559 880.688L173.559 832.299L108.75 891.004L108.75 881.179C108.014 856.616 89.6027 832.054 55.7256 832.054C19.1482 832.054 6.38286 861.775 6.38286 896.162L6.38287 1003.99L173.559 1003.99L173.559 962.972ZM39.5234 896.408C39.5234 884.126 46.1517 872.337 61.3718 872.337C75.61 872.337 84.4473 883.881 84.4473 896.899L84.4473 962.972L39.5234 962.972L39.5234 896.408Z" />
          <path
            d="M120.042 812.649C138.453 812.649 176.995 801.842 176.995 713.171C176.995 666.502 160.302 614.921 124.215 614.921C55.2335 614.921 97.2117 761.068 58.1794 761.068C39.5225 761.068 34.1219 736.751 34.1219 711.206C34.1219 685.661 39.5225 663.555 62.1072 663.555L62.1072 617.378C16.6923 616.886 3.43614 660.362 3.43614 711.206C3.43614 771.63 22.3384 809.456 55.479 809.456C131.825 809.456 82.2371 662.081 123.97 662.081C138.208 662.081 145.573 683.205 145.573 713.417C145.573 740.436 140.417 763.279 120.042 763.033L120.042 812.649Z" />
          <path
            d="M120.042 593.06C138.453 593.06 176.995 582.253 176.995 493.582C176.995 446.913 160.302 395.332 124.215 395.332C55.2335 395.332 97.2117 541.479 58.1794 541.479C39.5225 541.479 34.1219 517.162 34.1219 491.617C34.1219 466.072 39.5225 443.966 62.1072 443.966L62.1072 397.788C16.6923 397.297 3.43613 440.773 3.43613 491.617C3.43613 552.041 22.3384 589.867 55.479 589.867C131.825 589.867 82.2371 442.492 123.97 442.492C138.208 442.492 145.572 463.616 145.572 493.828C145.573 520.846 140.417 543.69 120.042 543.444L120.042 593.06Z" />
          <path
            d="M173.558 366.596L173.558 321.892L68.4898 321.892L173.558 248.205L173.558 209.15L5.89088 209.15L5.89088 253.854L108.75 253.854L5.89089 322.138L5.89089 367.087L173.558 366.596Z" />
          <path
            d="M88.1294 184.588C137.227 184.588 176.75 146.516 176.75 85.3554C176.75 66.1967 168.649 46.7922 157.602 31.0722L175.031 31.0722L175.031 1.10625L78.8007 1.10625L78.8008 102.795L103.104 102.795L103.104 39.9149L120.043 39.9149C131.58 50.2311 138.209 71.1092 138.209 85.3554C138.209 116.55 119.552 139.638 88.1294 139.638C60.635 139.638 38.2956 114.093 38.2956 82.6535C38.2956 65.4598 45.6601 49.4943 56.707 39.1781L34.3678 0.61496C13.5015 19.2824 -5.2169e-05 48.5116 -5.07196e-05 81.6709C-4.81106e-05 141.358 39.2777 184.588 88.1294 184.588Z" />
          <path
            d="M240.494 1181.33L372.811 1181.33L372.811 1140.31L240.494 1140.31L240.494 1080.62L205.88 1080.62L205.88 1241.26L240.494 1241.26L240.494 1181.33Z" />
          <path
            d="M372.809 997.972L304.809 997.972L304.809 907.582L372.809 907.582L372.809 862.142L206.37 862.142L206.37 907.582L275.351 907.582L275.351 997.972L206.37 997.972L206.37 1043.17L372.809 1043.17L372.809 997.972Z" />
          <path
            d="M372.81 714.89C372.81 681.977 363.972 639.238 326.413 638.747C307.51 638.501 297.2 649.554 291.308 662.818C284.926 647.835 268.233 640.712 252.276 640.712C216.926 640.466 206.125 679.766 206.125 710.469L206.125 812.649L372.81 812.649L372.81 714.89ZM302.846 767.454L302.846 710.224C302.846 695.732 307.756 683.451 322.976 683.451C335.005 683.451 344.088 692.293 344.088 709.732L344.088 767.454L302.846 767.454ZM238.774 713.171C238.774 697.942 242.948 683.451 258.904 683.451C273.879 683.451 279.525 695.241 279.525 710.224L279.525 767.454L238.774 767.454L238.774 713.171Z" />
          <path
            d="M372.809 557.075L308.001 557.075L308.001 529.32L372.809 474.791L372.809 426.403L308.001 485.107L308.001 475.282C307.264 450.72 288.853 426.157 254.976 426.157C218.398 426.157 205.633 455.878 205.633 490.265L205.633 598.095L372.809 598.095L372.809 557.075ZM238.773 490.511C238.773 478.23 245.401 466.44 260.622 466.44C274.86 466.44 283.697 477.984 283.697 491.002L283.697 557.075L238.773 557.075L238.773 490.511Z" />
          <path
            d="M373.055 299.784C373.055 244.027 335.496 210.868 287.135 210.868C239.511 210.868 206.125 239.115 206.125 292.17L206.125 386.244L372.81 386.244L373.055 299.784ZM234.601 340.312L234.601 309.609C234.601 271.046 253.994 255.08 288.363 255.08C325.431 255.08 344.088 274.976 344.088 314.522L344.088 340.312L234.601 340.312Z" />
          <path
            d="M287.38 183.973C336.477 183.973 376 145.901 376 84.7405C376 65.5817 367.899 46.1775 356.852 30.4576L374.282 30.4576L374.282 0.491263L278.051 0.491268L278.051 102.18L302.354 102.18L302.354 39.2999L319.293 39.2999C330.831 49.6161 337.459 70.4942 337.459 84.7405C337.459 115.935 318.802 139.024 287.38 139.024C259.885 139.024 237.546 113.478 237.546 82.0385C237.546 64.8448 244.911 48.8793 255.957 38.5631L233.618 -2.22868e-05C212.752 18.6675 199.25 47.8969 199.25 81.0563C199.25 140.743 238.528 183.973 287.38 183.973Z" />
        </svg>
      </div>
      <div class="section-content">
        <div class="main-header">
          <div class="section-content">
            <div class="exhibition-subtitle">
              <h1>Crossing the bridge</h1>
              <h2>Interface Cultures exhibition</h2>
              <h2>Ars Electronica Festival 2022</h2>
              <h2>07.09-11.09.22</h2>
            </div>
          </div>
        </div>
        <!--<h1>CROSSING THE BRIDGE â€”<br>INTERFACE CULTURES<br>AT ARS ELECTRONICA 2022</h1>-->
        <!--
          <div class="video-wrapper">
            <div class="video-container">
              <iframe class="responsive-iframe" src="https://www.youtube.com/embed/tRyvzR8FpQ4" title="YouTube video player" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="" width="100%" height="500px" frameborder="0"></iframe>
            </div>
          </div>
        -->
        <div v-for="intro of intro" class="intro-text">
          <nuxt-content :document="intro" />
        </div>
      </div>
    </div>
  </div>
</template>

<style>
</style>

<script>
export default {
  async asyncData({ $content, params }) {
    const intro = await $content("").where({ title: { $eq: "intro" } }).fetch();
    return {
      intro
    }
  },

  props: [
    "intro"
  ],

  mounted() {
    this.myMethod()
  },

  methods: {
    myMethod: function () {
      let titleSVG;
      let calcWidth;
      let calcHeight;

      const shrinkFont = () => {
        titleSVG.classList.remove("title-svg-expanded");
        titleSVG.style.width = `${(window.innerWidth * 0.13) - (window.innerWidth * 0.01)}px`;
        titleSVG.style.height = `${calcHeight}px`
        titleSVG.classList.add("title-svg-shrinked");
      }

      const expandFont = () => {
        titleSVG.classList.remove("title-svg-shrinked");
        titleSVG.style.width = `${calcWidth}px`
        titleSVG.style.height = `${window.innerHeight}px`;
        titleSVG.classList.add("title-svg-expanded");
      }
      titleSVG = document.getElementById("title-svg");
      const exhibitionSubtitle = document.getElementsByClassName("exhibition-subtitle")[0];
      calcWidth = titleSVG.clientWidth;
      calcHeight = window.innerHeight * ((window.innerWidth * 0.13) - (window.innerWidth * 0.01)) / titleSVG.clientWidth;

      window.addEventListener("scroll", function () {
        const parallax = document.getElementsByClassName("parallax");
        const parallaxOne = document.getElementsByClassName("parallax-one");
        let offset = window.pageYOffset;
        for (let i = 0; i < parallax.length; i++) {
          parallax[i].style.backgroundPositionY = offset * 0.4 + "px";
        }

        for (let i = 0; i < parallaxOne.length; i++) {
          parallaxOne[i].style.backgroundPositionY = offset * -0.5 + "px";
        }

        if (window.pageYOffset > 0) {
          shrinkFont();
          exhibitionSubtitle.style.display = "none"
        } else {
          expandFont();
          if (window.innerWidth > 768) {
            exhibitionSubtitle.style.display = "flex"
          }
        }
      });
    }
  }
}
</script>